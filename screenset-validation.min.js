!function(){"use strict";function e(){"object"==typeof console&&console.error&&console.error.apply(console,arguments)}function t(t,r,o,n){function i(t){if(c===!0)return void e("Validate result triggered twice - do not return an object AND fire callback");if(c=!0,a.errors=t,a.watchers){var r;for(r in a.watchers)a.watchers[r](t)}n(t)}var s=JSON.stringify(r)+o;if(a.formDataStr===s)return void(a.errors?n(a.errors):(a.watchers||(a.watchers=[]),a.watchers.push(n)));a={formDataStr:s};var c=!1,g=t(r,o,i);g&&i(g)}function r(){var e=gigya._.plugins.ScreenSet,r=gigya._.plugins.ScreenSet.TermsInput;r.FORM_TYPE_CRITERIA=function(e){return"checkbox"===e.type};var a=gigya._.plugins.ScreenSet.LoginIdInput,o=a.prototype.serverQueryDone;a.prototype.serverQueryDone=function(t,r,a){this._validityState!==e.ValidityStates.error&&o.apply(this,arguments)};var n=gigya._.plugins.ScreenSet.BaseForm,i=n.prototype.validate;n.prototype.validate=function(r){var a=this,o=arguments,n=a._screenSet.params,s=a._parent.ID;if("object"!=typeof n.validation||!n.validation[s])return i.apply(a,o);var c;try{c=new gigya._.plugins.LoadDimmer(this.instanceElement)}catch(g){}c&&c.show&&c.hide||(c={show:function(){},hide:function(){}},"object"==typeof console&&console.error&&console.error("Error initializing screen set validation dimmer.")),c.show(),t(n.validation[s],a.getFlatFormData(!1,!0),"submit",function(t){return c.hide(),"object"!=typeof t||0===Object.keys(t).length?i.apply(a,o):void i.call(a,function(o){var n;for(n in t)if("_form"!==n){var i=a.getField(n);i&&i.setValidityState(e.ValidityStates.error,!0);var s=a._errorDisplayElements[n]&&a._errorDisplayElements[n][0];s&&"string"==typeof t[n]&&s.showError({errorCode:400027,errorMessage:t[n]})}else a.showErrors([{errorCode:400003,errorMessage:t[n]}],!0);r(!1)})})};var s=n.prototype.onInputChange;n.prototype.onInputChange=function(r,a){var o=this,n=arguments;if(a)return s.apply(o,n);var i=o._screenSet.params,c=o._parent.ID;return"object"==typeof i.validation&&i.validation[c]?(r.setValidityState(e.ValidityStates.pending),void t(i.validation[c],o.getFlatFormData(!1,!0),"change",function(t){s.apply(o,n);var a=r.normalizedFieldName;if(t[a]){r.setValidityState(e.ValidityStates.error,!0);var i=o._errorDisplayElements[a]&&o._errorDisplayElements[a][0];i&&"string"==typeof t[a]&&i.showError({errorCode:400027,errorMessage:t[a]})}})):s.apply(o,n)}}Object.keys||(Object.keys=function(e){var t,r=[];for(t in e)e.hasOwnProperty(t)&&r.push(t);return r});var a={},o=gigya._.plugins.setPluginInstance;gigya._.plugins.setPluginInstance=function(t,a){if("accounts"===a.namespace)try{r()}catch(n){e("Failed to initialize screenset validation",n)}return o.apply(this,arguments)};var n=gigya.accounts.showScreenSet;gigya.accounts.showScreenSet=function(){try{var t=gigya.utils.object.merge([gigya.thisScript.globalConf,arguments]);if(t.customLang)for(var r in t.customLang)gigya.i18n["gigya.services.accounts.plugins.screenSet.js"][gigya.thisScript.lang.langCode][r]=t.customLang[r]}catch(a){e("Could not use custom i18n",a)}n.apply(this,arguments)};var i=".gigya-form-error-msg.gigya-error-msg-active { margin-top: 25px !important; } .gigya-composite-control-submit { padding-bottom: 0 !important; } .gigya-layout-row.link-row { margin-top: 25px; !important; }",s=document.head||document.getElementsByTagName("head")[0],c=document.createElement("style");c.type="text/css",c.styleSheet?c.styleSheet.cssText=i:c.appendChild(document.createTextNode(i)),s.appendChild(c)}();