!function(){"use strict";function a(){"object"==typeof console&&console.error&&console.error.apply(console,arguments)}function c(c,d,e,f){function j(c){if(h===!0)return void a("Validate result triggered twice - do not return an object AND fire callback");if(h=!0,b.errors=c,b.watchers){var d;for(d in b.watchers)b.watchers[d](c)}f(c)}var g=JSON.stringify(d)+e;if(b.formDataStr===g)return void(b.errors?f(b.errors):(b.watchers||(b.watchers=[]),b.watchers.push(f)));b={formDataStr:g};var h=!1,i=c(d,e,j);i&&j(i)}function e(){var a=gigya._.plugins.ScreenSet,b=gigya._.plugins.ScreenSet.TermsInput;b&&(b.FORM_TYPE_CRITERIA=function(a){return"checkbox"===a.type});var d=gigya._.plugins.ScreenSet.LoginIdInput,e=d.prototype.serverQueryDone;d.prototype.serverQueryDone=function(b,c,d){this._validityState!==a.ValidityStates.error&&e.apply(this,arguments)};var f=gigya._.plugins.ScreenSet.BaseForm,g=f.prototype.validate;f.prototype.validate=function(b){var d=this,e=arguments,f=d._screenSet.params,h=d._parent.ID;return f.validation&&"object"==typeof f.validation&&f.validation[h]?(d._screen.dimScreen(),void c(f.validation[h],d.getFlatFormData(!1,!0),"submit",function(c){return d._screen.undimScreen(),c&&"object"==typeof c&&0!==Object.keys(c).length?void g.call(d,function(e){var f;for(f in c)if("_form"!==f){var g=d.getField(f);g&&g.setValidityState(a.ValidityStates.error,!0);var h=d._errorDisplayElements[f]&&d._errorDisplayElements[f][0];h&&"string"==typeof c[f]&&h.showError({errorCode:400027,errorMessage:c[f]})}else d.showErrors([{errorCode:400003,errorMessage:c[f]}],!0);b(!1)}):g.apply(d,e)})):g.apply(d,e)};var h=f.prototype.onInputChange;f.prototype.onInputChange=function(b,d){var e=this,f=arguments;if(d)return h.apply(e,f);var g=e._screenSet.params,i=e._parent.ID;return g.validation&&"object"==typeof g.validation&&g.validation[i]?(b.setValidityState(a.ValidityStates.pending),void c(g.validation[i],e.getFlatFormData(!1,!0),"change",function(c){h.apply(e,f);var d=b.normalizedFieldName;if(c[d]){b.setValidityState(a.ValidityStates.error,!0);var g=e._errorDisplayElements[d]&&e._errorDisplayElements[d][0];"data.terms"===d&&!g&&e._errorDisplayElements.null&&(g=e._errorDisplayElements.null[0]),g&&"string"==typeof c[d]&&g.showError({errorCode:400027,errorMessage:c[d]})}})):h.apply(e,f)}}Object.keys||(Object.keys=function(a){var c,b=[];for(c in a)a.hasOwnProperty(c)&&b.push(c);return b});var b={},d=gigya._.plugins.setPluginInstance;gigya._.plugins.setPluginInstance=function(b,c){if("accounts"===c.namespace)try{e()}catch(b){a("Failed to initialize screenset validation",b)}return d.apply(this,arguments)};var f=".gigya-form-error-msg.gigya-error-msg-active { margin-top: 25px !important; } .gigya-composite-control-submit { padding-bottom: 0 !important; } .gigya-layout-row.link-row { margin-top: 25px; !important; }",g=document.head||document.getElementsByTagName("head")[0],h=document.createElement("style");h.type="text/css",h.styleSheet?h.styleSheet.cssText=f:h.appendChild(document.createTextNode(f)),g.appendChild(h)}();
