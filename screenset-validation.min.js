!function(){"use strict";function e(){"object"==typeof console&&console.error&&console.error.apply(console,arguments)}function t(t,r,n,o){function i(t){if(l===!0)return void e("Validate result triggered twice - do not return an object AND fire callback");if(l=!0,a.errors=t,a.watchers){var r;for(r in a.watchers)a.watchers[r](t)}o(t)}var s=JSON.stringify(r)+n;if(a.formDataStr===s)return void(a.errors?o(a.errors):(a.watchers||(a.watchers=[]),a.watchers.push(o)));a={formDataStr:s};var l=!1,c=t(r,n,i);c&&i(c)}function r(){var e=gigya._.plugins.ScreenSet,r=gigya._.plugins.ScreenSet.TermsInput;r.FORM_TYPE_CRITERIA=function(e){return"checkbox"===e.type};var a=gigya._.plugins.ScreenSet.LoginIdInput,n=a.prototype.serverQueryDone;a.prototype.serverQueryDone=function(t,r,a){this._validityState!==e.ValidityStates.error&&n.apply(this,arguments)};var o=gigya._.plugins.ScreenSet.BaseForm,i=o.prototype.validate;o.prototype.validate=function(r){var a=this,n=arguments,o=a._screenSet.params,s=a._parent.ID;if("object"!=typeof o.validation||!o.validation[s])return i.apply(a,n);var l;try{l=new gigya._.plugins.LoadDimmer(this.instanceElement)}catch(c){}l&&l.show&&l.hide||(l={show:function(){},hide:function(){}},"object"==typeof console&&console.error&&console.error("Error initializing screen set validation dimmer.")),l.show(),t(o.validation[s],a.getFlatFormData(!1,!0),"submit",function(t){return l.hide(),"object"!=typeof t||0===Object.keys(t).length?i.apply(a,n):void i.call(a,function(n){var o;for(o in t)if("_form"!==o){var i=a.getField(o);i&&i.setValidityState(e.ValidityStates.error,!0);var s=a._errorDisplayElements[o]&&a._errorDisplayElements[o][0];s&&"string"==typeof t[o]&&s.showError({errorCode:400027,errorMessage:t[o]})}else a.showErrors([{errorCode:400003,errorMessage:t[o]}],!0);r(!1)})})};var s=o.prototype.onInputChange;o.prototype.onInputChange=function(r,a){var n=this,o=arguments;if(a)return s.apply(n,o);var i=n._screenSet.params,l=n._parent.ID;return"object"==typeof i.validation&&i.validation[l]?(r.setValidityState(e.ValidityStates.pending),void t(i.validation[l],n.getFlatFormData(!1,!0),"change",function(t){s.apply(n,o);var a=r.normalizedFieldName;if(t[a]){r.setValidityState(e.ValidityStates.error,!0);var i=n._errorDisplayElements[a]&&n._errorDisplayElements[a][0];i&&"string"==typeof t[a]&&i.showError({errorCode:400027,errorMessage:t[a]})}})):s.apply(n,o)}}Object.keys||(Object.keys=function(e){var t,r=[];for(t in e)e.hasOwnProperty(t)&&r.push(t);return r});var a={},n=gigya._.plugins.setPluginInstance;gigya._.plugins.setPluginInstance=function(t,a){if("accounts"===a.namespace)try{r()}catch(o){e("Failed to initialize screenset validation",o)}return n.apply(this,arguments)};var o=".gigya-form-error-msg.gigya-error-msg-active { margin-top: 25px !important; }",i=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",s.styleSheet?s.styleSheet.cssText=o:s.appendChild(document.createTextNode(o)),i.appendChild(s)}();